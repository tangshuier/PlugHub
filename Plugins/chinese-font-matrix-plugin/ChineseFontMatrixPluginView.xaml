<UserControl x:Class="ChineseFontMatrixPlugin.ChineseFontMatrixPluginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ChineseFontMatrixPlugin"
             mc:Ignorable="d"
             d:DesignHeight="500" d:DesignWidth="850"
             MinWidth="700" MinHeight="450"
             Padding="10"
             Background="Transparent">
    <UserControl.Resources>
        <!-- 主题相关资源 -->
        <SolidColorBrush x:Key="PrimaryColor" Color="#3498db"/>
        <SolidColorBrush x:Key="PrimaryDarkColor" Color="#2980b9"/>
        <SolidColorBrush x:Key="PrimaryDarkerColor" Color="#1f618d"/>
        <SolidColorBrush x:Key="TextColor" Color="#2c3e50"/>
        <SolidColorBrush x:Key="TextSecondaryColor" Color="#34495e"/>
        <SolidColorBrush x:Key="TextTertiaryColor" Color="#555555"/>
        <SolidColorBrush x:Key="BorderColor" Color="#bdc3c7"/>
        <SolidColorBrush x:Key="BackgroundColor" Color="#ffffff"/>
        <SolidColorBrush x:Key="BackgroundSecondaryColor" Color="#f8f9fa"/>
        <SolidColorBrush x:Key="BackgroundTertiaryColor" Color="#ecf0f1"/>
        <SolidColorBrush x:Key="ControlBackgroundColor" Color="#ffffff"/>
        
        <!-- 样式定义 -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
        
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{DynamicResource TextTertiaryColor}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>
        
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Setter Property="Background" Value="{DynamicResource ControlBackgroundColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,15,0"/>
            <Setter Property="Background" Value="{DynamicResource ControlBackgroundColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
        </Style>
        
        <Style x:Key="ComboBoxItemStyle" TargetType="ComboBoxItem">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="8 4"/>
            <Setter Property="Background" Value="{DynamicResource ControlBackgroundColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border 
                            x:Name="Bd" 
                            Background="{TemplateBinding Background}" 
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                            <ContentPresenter 
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource PrimaryDarkColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="8 4"/>
            <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{DynamicResource PrimaryDarkColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource PrimaryDarkColor}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{DynamicResource PrimaryDarkerColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="RadioButtonStyle" TargetType="RadioButton">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="Margin" Value="0,0,20,0"/>
        </Style>
        
        <Style x:Key="CheckBoxStyle" TargetType="CheckBox">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <Style x:Key="TabControlStyle" TargetType="TabControl">
            <Setter Property="Margin" Value="0,5,0,0"/>
            <Setter Property="Background" Value="{DynamicResource BackgroundColor}"/>
        </Style>
        
        <Style x:Key="TabItemStyle" TargetType="TabItem">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="15 8"/>
            <Setter Property="Margin" Value="0,0,2,0"/>
            <Setter Property="Background" Value="{DynamicResource BackgroundSecondaryColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1 1 1 0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border 
                            x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                            <TextBlock 
                                x:Name="TextContent"
                                Text="{TemplateBinding Header}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Foreground="{TemplateBinding Foreground}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter TargetName="TextContent" Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource PrimaryDarkColor}"/>
                                <Setter TargetName="TextContent" Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="ListViewStyle" TargetType="ListView">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Background" Value="{DynamicResource ControlBackgroundColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 标题栏 -->
        <Border x:Name="HeaderBorder" Grid.Row="0" Background="{DynamicResource BackgroundSecondaryColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0 0 2 0" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="10" VerticalAlignment="Center">
                <TextBlock Text="汉字字模生成插件" Style="{StaticResource HeaderTextStyle}" Margin="0"/>
            </StackPanel>
        </Border>
        
        <!-- 主内容区 -->
        <TabControl Grid.Row="1" Style="{StaticResource TabControlStyle}">
            <!-- 字模生成 -->
            <TabItem Header="字模生成" Style="{StaticResource TabItemStyle}">
                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- 项目路径 -->
                    <Grid Grid.Row="0" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="项目路径:" Grid.Column="0" Style="{StaticResource LabelStyle}"/>
                        <TextBox x:Name="ProjectPathTextBox" Grid.Column="1" Style="{StaticResource TextBoxStyle}" Margin="0"/>
                        <Button Content="浏览" Click="OnBrowseProjectClick" Grid.Column="2" Style="{StaticResource ButtonStyle}" Width="70"/>
                    </Grid>
                    
                    <!-- 字体设置 -->
                    <Grid Grid.Row="1" Margin="0,0,0,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="字体设置:" Grid.Row="0" Style="{StaticResource SectionHeaderStyle}"/>
                        
                        <WrapPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Top" Margin="0,0,0,10">
                            <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                                <TextBlock Text="字体名称:" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="FontNameTextBox" Width="120" Text="SimHei" Style="{StaticResource TextBoxStyle}"/>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                                <TextBlock Text="字体大小:" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="FontSizeComboBox" Width="80" Loaded="OnComboBoxLoaded">
                                    <ComboBoxItem Content="16" IsSelected="True"/>
                                    <ComboBoxItem Content="24"/>
                                    <ComboBoxItem Content="32"/>
                                </ComboBox>
                            </StackPanel>
                        </WrapPanel>
                        
                        <WrapPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Top">
                            <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                                <TextBlock Text="模式:" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="ModeComboBox" Width="100" Loaded="OnComboBoxLoaded">
                                    <ComboBoxItem Content="行列式" IsSelected="True"/>
                                    <ComboBoxItem Content="列行式"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                                <TextBlock Text="码型:" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="CodeTypeComboBox" Width="80" Loaded="OnComboBoxLoaded">
                                    <ComboBoxItem Content="阳码" IsSelected="True"/>
                                    <ComboBoxItem Content="阴码"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="位序:" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="BitOrderComboBox" Width="100" Loaded="OnComboBoxLoaded">
                                    <ComboBoxItem Content="低位在前" IsSelected="True"/>
                                    <ComboBoxItem Content="高位在前"/>
                                </ComboBox>
                            </StackPanel>
                        </WrapPanel>
                    </Grid>
                    
                    <!-- 生成方式 -->
                    <Grid Grid.Row="2" Margin="0,0,0,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="生成方式:" Grid.Row="0" Style="{StaticResource SectionHeaderStyle}"/>
                        
                        <StackPanel Grid.Row="1" Orientation="Horizontal">
                            <RadioButton x:Name="SearchRadio" Content="搜索代码" GroupName="GenerateMode" Style="{StaticResource RadioButtonStyle}" IsChecked="True" Checked="OnGenerateModeChanged"/>
                            <RadioButton x:Name="ManualRadio" Content="手动输入" GroupName="GenerateMode" Style="{StaticResource RadioButtonStyle}" Checked="OnGenerateModeChanged"/>
                            <RadioButton x:Name="BothRadio" Content="两者结合" GroupName="GenerateMode" Style="{StaticResource RadioButtonStyle}" Checked="OnGenerateModeChanged"/>
                        </StackPanel>
                    </Grid>
                    
                    <!-- 手动输入 -->
                    <Grid Grid.Row="3" Margin="0,0,0,15" x:Name="ManualInputGrid" Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="手动输入汉字:" Grid.Row="0" Style="{StaticResource SectionHeaderStyle}"/>
                        
                        <TextBox x:Name="ManualCharsTextBox" Grid.Row="1" 
                                 Style="{StaticResource TextBoxStyle}" 
                                 Height="120" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"/>
                    </Grid>
                    
                    <!-- 操作按钮 -->
                    <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <Button Content="开始生成" Click="OnGenerateClick" Style="{StaticResource ButtonStyle}" Width="120" Height="35" Margin="0,0,20,0"/>
                        <Button Content="保存配置" Click="OnSaveConfigClick" Style="{StaticResource ButtonStyle}" Width="120" Height="35"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
            <!-- 生成结果 -->
            <TabItem Header="生成结果" Style="{StaticResource TabItemStyle}">
                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Text="生成结果" Grid.Row="0" Style="{StaticResource SectionHeaderStyle}"/>
                    
                    <ListView x:Name="GeneratedCharsListView" Grid.Row="1" Style="{StaticResource ListViewStyle}">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="汉字" DisplayMemberBinding="{Binding Char}" Width="80"/>
                                <GridViewColumn Header="字体" DisplayMemberBinding="{Binding FontName}" Width="120"/>
                                <GridViewColumn Header="大小" DisplayMemberBinding="{Binding FontSize}" Width="60"/>
                            </GridView>
                        </ListView.View>
                    </ListView>
                </Grid>
            </TabItem>
            
            <!-- 配置 -->
            <TabItem Header="配置" Style="{StaticResource TabItemStyle}">
                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Text="插件配置" Grid.Row="0" Style="{StaticResource SectionHeaderStyle}"/>
                    
                    <CheckBox x:Name="ClearExistingCheckBox" Content="清空现有字模" Grid.Row="1" Style="{StaticResource CheckBoxStyle}"/>
                    
                    <CheckBox x:Name="RememberChoiceCheckBox" Content="记住选择" Grid.Row="2" Style="{StaticResource CheckBoxStyle}"/>
                    
                    <Grid Grid.Row="3" Margin="0,5,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="重复处理:" Grid.Column="0" Style="{StaticResource LabelStyle}"/>
                        <ComboBox x:Name="DuplicateHandlingComboBox" Grid.Column="1" Width="120" Loaded="OnComboBoxLoaded">
                            <ComboBoxItem Content="询问" IsSelected="True"/>
                            <ComboBoxItem Content="覆盖"/>
                            <ComboBoxItem Content="跳过"/>
                        </ComboBox>
                    </Grid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
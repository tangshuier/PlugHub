<UserControl x:Class="ThemeTestPlugin.ThemeTestView" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid x:Name="MainGrid" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock x:Name="TitleTextBlock" Grid.Row="0" 
                   Text="主题色测试" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   Margin="0 0 0 20" />
        
        <!-- 主题信息 -->
        <Border x:Name="ThemeInfoBorder" Grid.Row="1" Margin="0 0 0 20" Padding="15" BorderThickness="1" CornerRadius="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                
                <!-- 已保存主题信息 -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 0 0 5">
                    <TextBlock x:Name="SavedThemeLabel" Text="已保存主题: " FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                    <TextBlock x:Name="SavedThemeTextBlock" Text="-" Margin="5 0" VerticalAlignment="Center" FontSize="14" />
                    <TextBlock x:Name="SavedThemeHint" Text="(从设置文件中获取)" FontSize="12" VerticalAlignment="Center" Margin="5 0" />
                </StackPanel>
                
                <!-- 当前预览主题信息 -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 5 0 10">
                    <TextBlock x:Name="CurrentThemeLabel" Text="当前预览主题: " FontWeight="Bold" FontSize="14" VerticalAlignment="Center" />
                    <TextBlock x:Name="CurrentThemeTextBlock" Text="-" Margin="5 0" VerticalAlignment="Center" FontSize="14" FontWeight="Medium" />
                    <TextBlock x:Name="CurrentThemeHint" Text="(包括实时预览)" FontSize="12" VerticalAlignment="Center" Margin="5 0" />
                </StackPanel>
                
                <!-- 主题状态提示 -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 0 0 15">
                    <TextBlock x:Name="ThemeStatusTextBlock" Text="" FontSize="12" VerticalAlignment="Center" />
                </StackPanel>
                
                <!-- 主题色预览 -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock x:Name="ThemePreviewLabel" Text="主题色预览: " FontWeight="Bold" FontSize="14" VerticalAlignment="Center" Margin="0 0 15 0" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        
                        <!-- 主背景色 -->
                        <Border x:Name="MainBgColorBorder" Grid.Column="0" Grid.Row="0" Width="40" Height="40" Margin="5" BorderThickness="1" CornerRadius="3" />
                        <TextBlock x:Name="MainBgColorLabel" Grid.Column="0" Grid.Row="1" Text="主背景" FontSize="10" HorizontalAlignment="Center" Margin="5 0" />
                        
                        <!-- 主前景色 -->
                        <Border x:Name="MainFgColorBorder" Grid.Column="1" Grid.Row="0" Width="40" Height="40" Margin="5" BorderThickness="1" CornerRadius="3" />
                        <TextBlock x:Name="MainFgColorLabel" Grid.Column="1" Grid.Row="1" Text="主前景" FontSize="10" HorizontalAlignment="Center" Margin="5 0" />
                        
                        <!-- 面板背景色 -->
                        <Border x:Name="PanelBgColorBorder" Grid.Column="2" Grid.Row="0" Width="40" Height="40" Margin="5" BorderThickness="1" CornerRadius="3" />
                        <TextBlock x:Name="PanelBgColorLabel" Grid.Column="2" Grid.Row="1" Text="面板背景" FontSize="10" HorizontalAlignment="Center" Margin="5 0" />
                        
                        <!-- 工作区背景色 -->
                        <Border x:Name="WorkspaceBgColorBorder" Grid.Column="3" Grid.Row="0" Width="40" Height="40" Margin="5" BorderThickness="1" CornerRadius="3" />
                        <TextBlock x:Name="WorkspaceBgColorLabel" Grid.Column="3" Grid.Row="1" Text="工作区" FontSize="10" HorizontalAlignment="Center" Margin="5 0" />
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 控件测试区域 -->
        <TabControl x:Name="TestTabControl" Grid.Row="2" Margin="0 10 0 0">
            <TabItem Header="基本控件">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    
                    <!-- 按钮测试 -->
                    <Label Grid.Row="0" Grid.Column="0" Content="按钮测试: " VerticalAlignment="Center" />
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                        <Button Content="普通按钮" Margin="5" />
                        <Button Content="禁用按钮" IsEnabled="False" Margin="5" />
                        <Button Content="默认按钮" IsDefault="True" Margin="5" />
                        <Button Content="取消按钮" IsCancel="True" Margin="5" />
                    </StackPanel>
                    
                    <!-- 文本控件测试 -->
                    <Label Grid.Row="1" Grid.Column="0" Content="文本控件: " VerticalAlignment="Center" />
                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="5 10 0 10">
                        <TextBox Text="可编辑文本框" Width="150" Margin="5" />
                        <TextBox Text="只读文本框" IsReadOnly="True" Width="150" Margin="5" />
                        <TextBox Text="禁用文本框" IsEnabled="False" Width="150" Margin="5" />
                        <ComboBox Margin="5" Width="150">
                            <ComboBoxItem Content="选项1" />
                            <ComboBoxItem Content="选项2" />
                            <ComboBoxItem Content="选项3" />
                        </ComboBox>
                    </StackPanel>
                    
                    <!-- 选择控件测试 -->
                    <Label Grid.Row="2" Grid.Column="0" Content="选择控件: " VerticalAlignment="Top" />
                    <StackPanel Grid.Row="2" Grid.Column="1" Margin="5 0">
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="复选框1" Margin="5" />
                            <CheckBox Content="复选框2" IsChecked="True" Margin="5" />
                            <CheckBox Content="复选框3" IsEnabled="False" Margin="5" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0 5">
                            <RadioButton Content="单选按钮1" GroupName="test" Margin="5" />
                            <RadioButton Content="单选按钮2" GroupName="test" IsChecked="True" Margin="5" />
                            <RadioButton Content="单选按钮3" GroupName="test" IsEnabled="False" Margin="5" />
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- 滑块测试 -->
                    <Label Grid.Row="3" Grid.Column="0" Content="滑块控件: " VerticalAlignment="Center" />
                    <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="5 0">
                        <Slider Width="200" Margin="5" />
                        <ProgressBar Width="200" Value="60" Margin="5" />
                        <StatusBar Height="30" Width="200" Margin="5">
                            <StatusBarItem>
                                <TextBlock Text="状态栏文本" />
                            </StatusBarItem>
                        </StatusBar>
                    </StackPanel>
                </Grid>
            </TabItem>
            
            <TabItem Header="容器控件">
                <Grid Margin="10">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Left">
                        <GroupBox Header="分组框" Width="300" Height="150" Margin="0 10 0 0">
                            <StackPanel>
                                <TextBlock Text="分组框内文本" Margin="5" />
                                <Button Content="分组框内按钮" Margin="5" />
                            </StackPanel>
                        </GroupBox>
                        
                        <Expander Header="可折叠面板" Width="300" Margin="0 10 0 0">
                            <StackPanel>
                                <TextBlock Text="可折叠面板内容" Margin="5" />
                                <CheckBox Content="可折叠面板选项" Margin="5" />
                            </StackPanel>
                        </Expander>
                        
                        <Border BorderThickness="1" Width="300" Height="100" Margin="0 10 0 0" Padding="10">
                            <TextBlock Text="边框容器示例" TextWrapping="Wrap" />
                        </Border>
                        
                        <ScrollViewer Width="300" Height="100" Margin="0 10 0 0" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="滚动内容项1" Margin="5" />
                                <TextBlock Text="滚动内容项2" Margin="5" />
                                <TextBlock Text="滚动内容项3" Margin="5" />
                                <TextBlock Text="滚动内容项4" Margin="5" />
                                <TextBlock Text="滚动内容项5" Margin="5" />
                                <TextBlock Text="滚动内容项6" Margin="5" />
                                <TextBlock Text="滚动内容项7" Margin="5" />
                                <TextBlock Text="滚动内容项8" Margin="5" />
                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
        
        <!-- 主题色代码示例 -->
        <Border x:Name="CodeExampleBorder" Grid.Row="3" Margin="0 10 0 0" BorderThickness="1">
            <StackPanel>
                <TextBlock x:Name="CodeExampleTitle" Text="主题色代码示例" FontSize="16" FontWeight="Bold" Margin="10 10 0 10" />
                <Border x:Name="CodeExampleInnerBorder" Margin="10" Padding="10" BorderThickness="1">
                    <TextBlock x:Name="CodeExampleText" TextWrapping="Wrap" FontFamily="Consolas" FontSize="12">
                        <!-- 如何在插件中使用主题色 -->
                        <Run Text="&lt;!-- 如何在插件中使用主题色 --&gt;&#x0a;" />
                        <Run Text="&lt;Grid Background=&quot;{Binding Background, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}&quot;&gt;&#x0a;" />
                        <Run Text="    &lt;Button Background=&quot;{Binding Background, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}&quot; &#x0a;" />
                        <Run Text="            Foreground=&quot;{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}&quot; /&gt;&#x0a;" />
                        <Run Text="&lt;/Grid&gt;&#x0a;&#x0a;" />
                        <!-- 或者直接使用PluginAPI获取主题色 -->
                        <Run Text="&lt;!-- 或者在代码中使用PluginAPI获取主题色 --&gt;&#x0a;" />
                        <Run Text="var backgroundBrush = _pluginApi.CurrentBackgroundBrush;&#x0a;" />
                        <Run Text="var foregroundBrush = _pluginApi.CurrentForegroundBrush;" />
                    </TextBlock>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>